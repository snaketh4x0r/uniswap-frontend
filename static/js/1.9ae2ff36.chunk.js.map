{"version":3,"sources":["components/OversizedPanel/index.js","assets/images/dropdown-blue.svg","components/AddressInputPanel/index.js","assets/svg/SVGArrowDown.js","components/ContextualInfoNew/index.js","components/TransactionDetails/index.js","components/ExchangePage/index.jsx","assets/images/question.svg"],"names":["Panel","styled","div","theme","concreteGray","PanelTop","PanelBottom","OversizedPanel","hideTop","hideBottom","children","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","d","stroke","SvgDropdownBlue","_ref","svgRef","title","props","width","height","viewBox","fill","ref","ForwardRef","forwardRef","InputPanel","flexColumnNoWrap","transparentize","shadowColor","inputBackground","ContainerRow","error","salmonRed","mercuryGray","InputContainer","LabelRow","flexRowNoWrap","doveGray","LabelContainer","InputRow","Input","input","royalBlue","placeholderGray","AddressInputPanel","initialInput","onChange","onError","t","useTranslation","library","useWeb3Context","useState","setInput","debouncedInput","useDebounce","address","undefined","name","data","setData","setError","useEffect","stale","isAddress","lookupAddress","then","catch","resolveName","type","autoComplete","autoCorrect","autoCapitalize","spellCheck","placeholder","event","value","checksummedInput","SVGArrowDown","SummaryWrapper","SummaryWrapperContainer","Details","ErrorSpan","span","isError","slippageWarning","highSlippageWarning","css","warningYellow","ColoredDropup","rest","ColoredDropdown","ContextualInfo","openDetailsText","closeDetailsText","contextualInfo","allowExpand","dropDownContent","showDetails","setShowDetails","onClick","s","role","aria-label","WARNING_TYPE","freeze","none","emptyInput","invalidEntryBound","riskyEntryHigh","riskyEntryLow","Flex","FlexBetween","SlippageRow","wrap","QuestionWrapper","button","HelpCircleStyled","img","fadeIn","keyframes","Popup","textColor","mediaWidth","upToSmall","FancyButton","chaliceGray","Option","active","white","darken","lighten","OptionLarge","color","BottomError","show","OptionCustom","Bold","LastSummaryText","SlippageSelector","Percent","Faded","TransactionInfo","ValueWrapper","TransactionDetails","activeIndex","setActiveIndex","warningType","setWarningType","inputRef","useRef","showPopup","setPopup","userInput","setUserInput","checkBounds","renderTransactionDetails","onMouseEnter","onMouseLeave","src","question","alt","setFromFixed","setFromCustom","tabIndex","parseInput","toString","current","focus","index","slippage","updateSlippage","setcustomSlippageError","slippageValue","Number","e","some","a","test","newSlippage","numParsed","parseInt","setRawSlippage","setRawTokenSlippage","b","text","ReactGA","category","action","independentField","INPUT","sending","amountFormatter","independentValueParsed","independentDecimals","Math","min","inputSymbol","recipientAddress","dependentValueMinumum","dependentDecimals","outputSymbol","percentSlippageFormatted","dependentValueMaximum","inputError","independentError","inputCurrency","outputCurrency","independentValue","account","slippageWarningText","inputValueParsed","outputValueParsed","renderSummary","OUTPUT","ETH_TO_TOKEN","TOKEN_TO_ETH","TOKEN_TO_TOKEN","ALLOWED_SLIPPAGE_DEFAULT","TOKEN_ALLOWED_SLIPPAGE_DEFAULT","DEADLINE_FROM_NOW","GAS_MARGIN","ethers","utils","bigNumberify","DownArrowBackground","DownArrow","clickable","ExchangeRateWrapper","ExchangeRate","calculateEtherTokenOutputFromInput","inputAmount","inputReserve","outputReserve","inputAmountWithFee","mul","numerator","denominator","add","calculateEtherTokenInputFromOutput","outputAmount","sub","constants","One","getInitialSwapState","dependentValue","swapStateReducer","state","payload","field","currency","newInputCurrency","newOutputCurrency","getExchangeRate","inputValue","inputDecimals","outputValue","outputDecimals","invert","factor","pow","ExchangePage","initialCurrency","addTransaction","useTransactionAdder","rawSlippage","rawTokenSlippage","allowedSlippageBig","tokenAllowedSlippageBig","pageview","window","location","pathname","search","useReducer","swapState","dispatchSwapState","recipient","setRecipient","recipientError","setRecipientError","swapType","getSwapType","useTokenDetails","symbol","decimals","inputExchangeAddress","exchangeAddress","outputExchangeAddress","inputExchangeContract","useExchangeContract","outputExchangeContract","contract","inputAllowance","useAddressAllowance","useExchangeReserves","inputReserveETH","reserveETH","inputReserveToken","reserveToken","outputReserveETH","outputReserveToken","inputBalance","useAddressBalance","outputBalance","inputBalanceFormatted","isInteger","outputBalanceFormatted","setIndependentValueParsed","dependentValueFormatted","inputValueFormatted","outputValueFormatted","setIndependentError","parsedValue","parseUnits","lte","Zero","gte","MaxUint256","Error","token","tokenAllowedSlippage","allowedSlippage","offset","minimum","maximum","lt","gt","calculateSlippageBounds","setInputError","showUnlock","setShowUnlock","inputValueCalculation","amount","calculatedDependentValue","reserveETHFirst","reserveTokenFirst","reserveETHSecond","reserveTokenSecond","intermediateValue","inverted","setInverted","exchangeRate","exchangeRateInverted","marketRate","firstRate","secondRate","getMarketRate","percentSlippage","abs","parseEther","isValid","estimatedText","formatBalance","deadline","ceil","Date","now","estimate","ethToTokenTransferInput","ethToTokenSwapInput","method","args","tokenToEthTransferInput","tokenToEthSwapInput","tokenToTokenTransferInput","tokenToTokenSwapInput","ethToTokenTransferOutput","ethToTokenSwapOutput","tokenToEthTransferOutput","tokenToEthSwapOutput","tokenToTokenTransferOutput","tokenToTokenSwapOutput","estimatedGasLimit","gasLimit","calculateGasMargin","response","customSlippageError","allBalances","useFetchAllBalances","CurrencyInputPanel","description","extraText","extraTextClickHander","valueToSet","onCurrencySelected","onValueChange","selectedTokens","selectedTokenAddress","errorMessage","disableUnlock","disabled","warning","module","exports"],"mappings":"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","file":"static/js/1.9ae2ff36.chunk.js","sourcesContent":["import React from 'react'\r\nimport styled from 'styled-components'\r\n\r\nconst Panel = styled.div`\r\n  position: relative;\r\n  background-color: ${({ theme }) => theme.concreteGray};\r\n  width: calc(100% - 1rem);\r\n  margin: 0 auto;\r\n  border-radius: 0.625rem;\r\n`\r\n\r\nconst PanelTop = styled.div`\r\n  content: '';\r\n  position: absolute;\r\n  top: -0.5rem;\r\n  left: 0;\r\n  height: 1rem;\r\n  width: 100%;\r\n  background-color: ${({ theme }) => theme.concreteGray};\r\n`\r\n\r\nconst PanelBottom = styled.div`\r\n  position: absolute;\r\n  top: 80%;\r\n  left: 0;\r\n  height: 1rem;\r\n  width: 100%;\r\n  background-color: ${({ theme }) => theme.concreteGray};\r\n`\r\n\r\nexport default function OversizedPanel({ hideTop, hideBottom, children }) {\r\n  return (\r\n    <Panel>\r\n      {hideTop || <PanelTop />}\r\n      {children}\r\n      {hideBottom || <PanelBottom />}\r\n    </Panel>\r\n  )\r\n}\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0.97168 1L6.20532 6L11.439 1\",\n  stroke: \"#2F80ED\"\n});\n\nvar SvgDropdownBlue = function SvgDropdownBlue(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 12,\n    height: 7,\n    viewBox: \"0 0 12 7\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), React.createElement(\"title\", null, title), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgDropdownBlue, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/dropdown-blue.80a3ae25.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState, useEffect } from 'react'\r\nimport styled from 'styled-components'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { useWeb3Context } from 'web3-react'\r\nimport { transparentize } from 'polished'\r\n\r\nimport { isAddress } from '../../utils'\r\nimport { useDebounce } from '../../hooks'\r\n\r\nconst InputPanel = styled.div`\r\n  ${({ theme }) => theme.flexColumnNoWrap}\r\n  box-shadow: 0 4px 8px 0 ${({ theme }) => transparentize(0.95, theme.shadowColor)};\r\n  position: relative;\r\n  border-radius: 1.25rem;\r\n  background-color: ${({ theme }) => theme.inputBackground};\r\n  z-index: 1;\r\n`\r\n\r\nconst ContainerRow = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  border-radius: 1.25rem;\r\n  border: 1px solid ${({ error, theme }) => (error ? theme.salmonRed : theme.mercuryGray)};\r\n\r\n  background-color: ${({ theme }) => theme.inputBackground};\r\n`\r\n\r\nconst InputContainer = styled.div`\r\n  flex: 1;\r\n`\r\n\r\nconst LabelRow = styled.div`\r\n  ${({ theme }) => theme.flexRowNoWrap}\r\n  align-items: center;\r\n  color: ${({ theme }) => theme.doveGray};\r\n  font-size: 0.75rem;\r\n  line-height: 1rem;\r\n  padding: 0.75rem 1rem;\r\n`\r\n\r\nconst LabelContainer = styled.div`\r\n  flex: 1 1 auto;\r\n  width: 0;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n`\r\n\r\nconst InputRow = styled.div`\r\n  ${({ theme }) => theme.flexRowNoWrap}\r\n  align-items: center;\r\n  padding: 0.25rem 0.85rem 0.75rem;\r\n`\r\n\r\nconst Input = styled.input`\r\n  font-size: 1rem;\r\n  outline: none;\r\n  border: none;\r\n  flex: 1 1 auto;\r\n  width: 0;\r\n  background-color: ${({ theme }) => theme.inputBackground};\r\n\r\n  color: ${({ error, theme }) => (error ? theme.salmonRed : theme.royalBlue)};\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n\r\n  ::placeholder {\r\n    color: ${({ theme }) => theme.placeholderGray};\r\n  }\r\n`\r\n\r\nexport default function AddressInputPanel({ title, initialInput = '', onChange = () => {}, onError = () => {} }) {\r\n  const { t } = useTranslation()\r\n\r\n  const { library } = useWeb3Context()\r\n\r\n  const [input, setInput] = useState(initialInput)\r\n  const debouncedInput = useDebounce(input, 150)\r\n\r\n  const [data, setData] = useState({ address: undefined, name: undefined })\r\n  const [error, setError] = useState(false)\r\n\r\n  // keep data and errors in sync\r\n  useEffect(() => {\r\n    onChange({ address: data.address, name: data.name })\r\n  }, [onChange, data.address, data.name])\r\n  useEffect(() => {\r\n    onError(error)\r\n  }, [onError, error])\r\n\r\n  // run parser on debounced input\r\n  useEffect(() => {\r\n    let stale = false\r\n\r\n    if (isAddress(debouncedInput)) {\r\n      try {\r\n        library\r\n          .lookupAddress(debouncedInput)\r\n          .then(name => {\r\n            if (!stale) {\r\n              // if an ENS name exists, set it as the destination\r\n              if (name) {\r\n                setInput(name)\r\n              } else {\r\n                setData({ address: debouncedInput, name: '' })\r\n                setError(null)\r\n              }\r\n            }\r\n          })\r\n          .catch(() => {\r\n            if (!stale) {\r\n              setData({ address: debouncedInput, name: '' })\r\n              setError(null)\r\n            }\r\n          })\r\n      } catch {\r\n        setData({ address: debouncedInput, name: '' })\r\n        setError(null)\r\n      }\r\n    } else {\r\n      if (debouncedInput !== '') {\r\n        try {\r\n          library\r\n            .resolveName(debouncedInput)\r\n            .then(address => {\r\n              if (!stale) {\r\n                // if the debounced input name resolves to an address\r\n                if (address) {\r\n                  setData({ address: address, name: debouncedInput })\r\n                  setError(null)\r\n                } else {\r\n                  setError(true)\r\n                }\r\n              }\r\n            })\r\n            .catch(() => {\r\n              if (!stale) {\r\n                setError(true)\r\n              }\r\n            })\r\n        } catch {\r\n          setError(true)\r\n        }\r\n      }\r\n    }\r\n\r\n    return () => {\r\n      stale = true\r\n    }\r\n  }, [debouncedInput, library, onChange, onError])\r\n\r\n  function onInput(event) {\r\n    if (data.address !== undefined || data.name !== undefined) {\r\n      setData({ address: undefined, name: undefined })\r\n    }\r\n    if (error !== undefined) {\r\n      setError()\r\n    }\r\n    const input = event.target.value\r\n    const checksummedInput = isAddress(input)\r\n    setInput(checksummedInput || input)\r\n  }\r\n\r\n  return (\r\n    <InputPanel>\r\n      <ContainerRow error={input !== '' && error}>\r\n        <InputContainer>\r\n          <LabelRow>\r\n            <LabelContainer>\r\n              <span>{title || t('recipientAddress')}</span>\r\n            </LabelContainer>\r\n          </LabelRow>\r\n          <InputRow>\r\n            <Input\r\n              type=\"text\"\r\n              autoComplete=\"off\"\r\n              autoCorrect=\"off\"\r\n              autoCapitalize=\"off\"\r\n              spellCheck=\"false\"\r\n              placeholder=\"0x1234...\"\r\n              error={input !== '' && error}\r\n              onChange={onInput}\r\n              value={input}\r\n            />\r\n          </InputRow>\r\n        </InputContainer>\r\n      </ContainerRow>\r\n    </InputPanel>\r\n  )\r\n}\r\n","import React from 'react'\r\n\r\nconst SVGArrowDown = props => (\r\n  <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 9 10\" fill=\"currentColor\" {...props}>\r\n    <path\r\n      d=\"M5.298 0H4.24v7.911h-.075L1.256 4.932l-.717.735L4.769 10 9 5.667l-.718-.735-2.908 2.979h-.076V0z\"\r\n      fill=\"currentColor\"\r\n    />\r\n  </svg>\r\n)\r\n\r\nexport default SVGArrowDown\r\n","import React, { useState } from 'react'\r\nimport styled, { css } from 'styled-components'\r\nimport { transparentize } from 'polished'\r\n\r\nimport { ReactComponent as Dropup } from '../../assets/images/dropup-blue.svg'\r\nimport { ReactComponent as Dropdown } from '../../assets/images/dropdown-blue.svg'\r\n\r\nconst SummaryWrapper = styled.div`\r\n  color: ${({ error, theme }) => (error ? theme.salmonRed : theme.doveGray)};\r\n  font-size: 0.75rem;\r\n  text-align: center;\r\n  margin-top: 1rem;\r\n  padding-top: 1rem;\r\n`\r\n\r\nconst SummaryWrapperContainer = styled.div`\r\n  ${({ theme }) => theme.flexRowNoWrap};\r\n  color: ${({ theme }) => theme.royalBlue};\r\n  text-align: center;\r\n  margin-top: 1rem;\r\n  padding-top: 1rem;\r\n  cursor: pointer;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 0.75rem;\r\n\r\n  img {\r\n    height: 0.75rem;\r\n    width: 0.75rem;\r\n  }\r\n`\r\n\r\nconst Details = styled.div`\r\n  background-color: ${({ theme }) => theme.concreteGray};\r\n  /* padding: 1.25rem 1.25rem 1rem 1.25rem; */\r\n  border-radius: 1rem;\r\n  font-size: 0.75rem;\r\n  margin: 1rem 0.5rem 0 0.5rem;\r\n`\r\n\r\nconst ErrorSpan = styled.span`\r\n  margin-right: 12px;\r\n  font-size: 0.75rem;\r\n  line-height: 0.75rem;\r\n\r\n  color: ${({ isError, theme }) => isError && theme.salmonRed};\r\n  ${({ slippageWarning, highSlippageWarning, theme }) =>\r\n    highSlippageWarning\r\n      ? css`\r\n          color: ${theme.salmonRed};\r\n          font-weight: 600;\r\n        `\r\n      : slippageWarning &&\r\n        css`\r\n          background-color: ${transparentize(0.6, theme.warningYellow)};\r\n          font-weight: 600;\r\n          padding: 0.25rem;\r\n        `}\r\n`\r\n\r\nconst WrappedDropup = ({ isError, highSlippageWarning, ...rest }) => <Dropup {...rest} />\r\nconst ColoredDropup = styled(WrappedDropup)`\r\n  path {\r\n    stroke: ${({ isError, theme }) => (isError ? theme.salmonRed : theme.royalBlue)};\r\n\r\n    ${({ highSlippageWarning, theme }) =>\r\n      highSlippageWarning &&\r\n      css`\r\n        stroke: ${theme.salmonRed};\r\n      `}\r\n  }\r\n`\r\n\r\nconst WrappedDropdown = ({ isError, highSlippageWarning, ...rest }) => <Dropdown {...rest} />\r\nconst ColoredDropdown = styled(WrappedDropdown)`\r\n  path {\r\n    stroke: ${({ isError, theme }) => (isError ? theme.salmonRed : theme.royalBlue)};\r\n\r\n    ${({ highSlippageWarning, theme }) =>\r\n      highSlippageWarning &&\r\n      css`\r\n        stroke: ${theme.salmonRed};\r\n      `}\r\n  }\r\n`\r\n\r\nexport default function ContextualInfo({\r\n  openDetailsText = 'Advanced Details',\r\n  closeDetailsText = 'Hide Advanced',\r\n  contextualInfo = '',\r\n  allowExpand = false,\r\n  isError = false,\r\n  slippageWarning,\r\n  highSlippageWarning,\r\n  dropDownContent\r\n}) {\r\n  const [showDetails, setShowDetails] = useState(false)\r\n  return !allowExpand ? (\r\n    <SummaryWrapper>{contextualInfo}</SummaryWrapper>\r\n  ) : (\r\n    <>\r\n      <SummaryWrapperContainer onClick={() => setShowDetails(s => !s)}>\r\n        <>\r\n          <ErrorSpan isError={isError} slippageWarning={slippageWarning} highSlippageWarning={highSlippageWarning}>\r\n            {(slippageWarning || highSlippageWarning) && (\r\n              <span role=\"img\" aria-label=\"warning\">\r\n                ⚠️\r\n              </span>\r\n            )}\r\n            {contextualInfo ? contextualInfo : showDetails ? closeDetailsText : openDetailsText}\r\n          </ErrorSpan>\r\n          {showDetails ? (\r\n            <ColoredDropup isError={isError} highSlippageWarning={highSlippageWarning} />\r\n          ) : (\r\n            <ColoredDropdown isError={isError} highSlippageWarning={highSlippageWarning} />\r\n          )}\r\n        </>\r\n      </SummaryWrapperContainer>\r\n      {showDetails && <Details>{dropDownContent()}</Details>}\r\n    </>\r\n  )\r\n}\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport ReactGA from 'react-ga'\r\nimport { useTranslation } from 'react-i18next'\r\nimport styled, { css, keyframes } from 'styled-components'\r\nimport { darken, lighten } from 'polished'\r\nimport { isAddress, amountFormatter } from '../../utils'\r\nimport { useDebounce } from '../../hooks'\r\n\r\nimport question from '../../assets/images/question.svg'\r\n\r\nimport NewContextualInfo from '../../components/ContextualInfoNew'\r\n\r\nconst WARNING_TYPE = Object.freeze({\r\n  none: 'none',\r\n  emptyInput: 'emptyInput',\r\n  invalidEntryBound: 'invalidEntryBound',\r\n  riskyEntryHigh: 'riskyEntryHigh',\r\n  riskyEntryLow: 'riskyEntryLow'\r\n})\r\n\r\nconst Flex = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n`\r\n\r\nconst FlexBetween = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  height: 100%;\r\n`\r\n\r\nconst WrappedSlippageRow = ({ wrap, ...rest }) => <Flex {...rest} />\r\nconst SlippageRow = styled(WrappedSlippageRow)`\r\n  position: relative;\r\n  flex-wrap: ${({ wrap }) => wrap && 'wrap'};\r\n  flex-direction: row;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n  width: 100%;\r\n  padding: 0;\r\n  padding-top: ${({ wrap }) => wrap && '0.25rem'};\r\n`\r\n\r\nconst QuestionWrapper = styled.button`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin: 0;\r\n  padding: 0;\r\n  margin-left: 0.4rem;\r\n  padding: 0.2rem;\r\n  border: none;\r\n  background: none;\r\n  outline: none;\r\n  cursor: default;\r\n  border-radius: 36px;\r\n\r\n  :hover,\r\n  :focus {\r\n    opacity: 0.7;\r\n  }\r\n`\r\n\r\nconst HelpCircleStyled = styled.img`\r\n  height: 18px;\r\n  width: 18px;\r\n`\r\n\r\nconst fadeIn = keyframes`\r\n  from {\r\n    opacity : 0;\r\n  }\r\n\r\n  to {\r\n    opacity : 1;\r\n  }\r\n`\r\n\r\nconst Popup = styled(Flex)`\r\n  position: absolute;\r\n  width: 228px;\r\n  left: -78px;\r\n  top: -124px;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 0.6rem 1rem;\r\n  line-height: 150%;\r\n  background: ${({ theme }) => theme.inputBackground};\r\n  border: 1px solid ${({ theme }) => theme.mercuryGray};\r\n\r\n  border-radius: 8px;\r\n\r\n  animation: ${fadeIn} 0.15s linear;\r\n\r\n  color: ${({ theme }) => theme.textColor};\r\n  font-style: italic;\r\n\r\n  ${({ theme }) => theme.mediaWidth.upToSmall`\r\n    left: -20px;\r\n  `}\r\n`\r\n\r\nconst FancyButton = styled.button`\r\n  color: ${({ theme }) => theme.textColor};\r\n  align-items: center;\r\n  min-width: 55px;\r\n  height: 2rem;\r\n  border-radius: 36px;\r\n  font-size: 12px;\r\n  border: 1px solid ${({ theme }) => theme.mercuryGray};\r\n  outline: none;\r\n  background: ${({ theme }) => theme.inputBackground};\r\n\r\n  :hover {\r\n    cursor: inherit;\r\n    border: 1px solid ${({ theme }) => theme.chaliceGray};\r\n  }\r\n  :focus {\r\n    border: 1px solid ${({ theme }) => theme.royalBlue};\r\n  }\r\n`\r\n\r\nconst Option = styled(FancyButton)`\r\n  margin-right: 8px;\r\n  margin-top: 6px;\r\n\r\n  :hover {\r\n    cursor: pointer;\r\n  }\r\n\r\n  ${({ active, theme }) =>\r\n    active &&\r\n    css`\r\n      background-color: ${({ theme }) => theme.royalBlue};\r\n      color: ${({ theme }) => theme.white};\r\n      border: none;\r\n\r\n      :hover {\r\n        border: none;\r\n        box-shadow: none;\r\n        background-color: ${({ theme }) => darken(0.05, theme.royalBlue)};\r\n      }\r\n\r\n      :focus {\r\n        border: none;\r\n        box-shadow: none;\r\n        background-color: ${({ theme }) => lighten(0.05, theme.royalBlue)};\r\n      }\r\n\r\n      :active {\r\n        background-color: ${({ theme }) => darken(0.05, theme.royalBlue)};\r\n      }\r\n\r\n      :hover:focus {\r\n        background-color: ${({ theme }) => theme.royalBlue};\r\n      }\r\n      :hover:focus:active {\r\n        background-color: ${({ theme }) => darken(0.05, theme.royalBlue)};\r\n      }\r\n    `}\r\n`\r\n\r\nconst OptionLarge = styled(Option)`\r\n  width: 120px;\r\n`\r\n\r\nconst Input = styled.input`\r\n  background: ${({ theme }) => theme.inputBackground};\r\n  flex-grow: 1;\r\n  font-size: 12px;\r\n\r\n  outline: none;\r\n  box-sizing: border-box;\r\n\r\n  &::-webkit-outer-spin-button,\r\n  &::-webkit-inner-spin-button {\r\n    -webkit-appearance: none;\r\n  }\r\n\r\n  cursor: inherit;\r\n\r\n  color: ${({ theme }) => theme.doveGray};\r\n  text-align: left;\r\n  ${({ active }) =>\r\n    active &&\r\n    css`\r\n      color: initial;\r\n      cursor: initial;\r\n      text-align: right;\r\n    `}\r\n\r\n  ${({ placeholder }) =>\r\n    placeholder !== 'Custom' &&\r\n    css`\r\n      text-align: right;\r\n      color: ${({ theme }) => theme.textColor};\r\n    `}\r\n\r\n  ${({ color }) =>\r\n    color === 'red' &&\r\n    css`\r\n      color: ${({ theme }) => theme.salmonRed};\r\n    `}\r\n`\r\n\r\nconst BottomError = styled.div`\r\n  ${({ show }) =>\r\n    show &&\r\n    css`\r\n      padding-top: 12px;\r\n    `}\r\n  color: ${({ theme }) => theme.doveGray};\r\n  ${({ color }) =>\r\n    color === 'red' &&\r\n    css`\r\n      color: ${({ theme }) => theme.salmonRed};\r\n    `}\r\n`\r\n\r\nconst OptionCustom = styled(FancyButton)`\r\n  height: 2rem;\r\n  position: relative;\r\n  width: 120px;\r\n  margin-top: 6px;\r\n  padding: 0 0.75rem;\r\n\r\n  ${({ active }) =>\r\n    active &&\r\n    css`\r\n      border: 1px solid ${({ theme }) => theme.royalBlue};\r\n      :hover {\r\n        border: 1px solid ${({ theme }) => darken(0.1, theme.royalBlue)};\r\n      }\r\n    `}\r\n\r\n  ${({ color }) =>\r\n    color === 'red' &&\r\n    css`\r\n      border: 1px solid ${({ theme }) => theme.salmonRed};\r\n    `}\r\n\r\n  input {\r\n    width: 100%;\r\n    height: 100%;\r\n    border: 0px;\r\n    border-radius: 2rem;\r\n  }\r\n`\r\n\r\nconst Bold = styled.span`\r\n  font-weight: 500;\r\n`\r\n\r\nconst LastSummaryText = styled.div`\r\n  padding-top: 0.5rem;\r\n`\r\n\r\nconst SlippageSelector = styled.div`\r\n  background-color: ${({ theme }) => darken(0.04, theme.concreteGray)};\r\n  padding: 1rem 1.25rem 1rem 1.25rem;\r\n  border-radius: 12px;\r\n`\r\n\r\nconst Percent = styled.div`\r\n  color: inherit;\r\n  font-size: 0, 8rem;\r\n  flex-grow: 0;\r\n\r\n  ${({ color, theme }) =>\r\n    (color === 'faded' &&\r\n      css`\r\n        color: ${theme.doveGray};\r\n      `) ||\r\n    (color === 'red' &&\r\n      css`\r\n        color: ${theme.salmonRed};\r\n      `)};\r\n`\r\n\r\nconst Faded = styled.span`\r\n  opacity: 0.7;\r\n`\r\n\r\nconst TransactionInfo = styled.div`\r\n  padding: 1.25rem 1.25rem 1rem 1.25rem;\r\n`\r\n\r\nconst ValueWrapper = styled.span`\r\n  padding: 0.125rem 0.3rem 0.1rem 0.3rem;\r\n  background-color: ${({ theme }) => darken(0.04, theme.concreteGray)};\r\n  border-radius: 12px;\r\n  font-variant: tabular-nums;\r\n`\r\n\r\nexport default function TransactionDetails(props) {\r\n  const { t } = useTranslation()\r\n\r\n  const [activeIndex, setActiveIndex] = useState(3)\r\n\r\n  const [warningType, setWarningType] = useState(WARNING_TYPE.none)\r\n\r\n  const inputRef = useRef()\r\n\r\n  const [showPopup, setPopup] = useState(false)\r\n\r\n  const [userInput, setUserInput] = useState('')\r\n  const debouncedInput = useDebounce(userInput, 150)\r\n\r\n  useEffect(() => {\r\n    if (activeIndex === 4) {\r\n      checkBounds(debouncedInput)\r\n    }\r\n  })\r\n\r\n  function renderSummary() {\r\n    let contextualInfo = ''\r\n    let isError = false\r\n\r\n    if (props.inputError || props.independentError) {\r\n      contextualInfo = props.inputError || props.independentError\r\n      isError = true\r\n    } else if (!props.inputCurrency || !props.outputCurrency) {\r\n      contextualInfo = t('selectTokenCont')\r\n    } else if (!props.independentValue) {\r\n      contextualInfo = t('enterValueCont')\r\n    } else if (props.sending && !props.recipientAddress) {\r\n      contextualInfo = t('noRecipient')\r\n    } else if (props.sending && !isAddress(props.recipientAddress)) {\r\n      contextualInfo = t('invalidRecipient')\r\n    } else if (!props.account) {\r\n      contextualInfo = t('noWallet')\r\n      isError = true\r\n    }\r\n\r\n    const slippageWarningText = props.highSlippageWarning\r\n      ? t('highSlippageWarning')\r\n      : props.slippageWarning\r\n      ? t('slippageWarning')\r\n      : ''\r\n\r\n    return (\r\n      <NewContextualInfo\r\n        openDetailsText={t('transactionDetails')}\r\n        closeDetailsText={t('hideDetails')}\r\n        contextualInfo={contextualInfo ? contextualInfo : slippageWarningText}\r\n        allowExpand={\r\n          !!(\r\n            props.inputCurrency &&\r\n            props.outputCurrency &&\r\n            props.inputValueParsed &&\r\n            props.outputValueParsed &&\r\n            (props.sending ? props.recipientAddress : true)\r\n          )\r\n        }\r\n        isError={isError}\r\n        slippageWarning={props.slippageWarning && !contextualInfo}\r\n        highSlippageWarning={props.highSlippageWarning && !contextualInfo}\r\n        renderTransactionDetails={renderTransactionDetails}\r\n        dropDownContent={dropDownContent}\r\n      />\r\n    )\r\n  }\r\n\r\n  const dropDownContent = () => {\r\n    return (\r\n      <>\r\n        {renderTransactionDetails()}\r\n        <SlippageSelector>\r\n          <SlippageRow>\r\n            Limit additional price slippage\r\n            <QuestionWrapper\r\n              onClick={() => {\r\n                setPopup(!showPopup)\r\n              }}\r\n              onMouseEnter={() => {\r\n                setPopup(true)\r\n              }}\r\n              onMouseLeave={() => {\r\n                setPopup(false)\r\n              }}\r\n            >\r\n              <HelpCircleStyled src={question} alt=\"popup\" />\r\n            </QuestionWrapper>\r\n            {showPopup ? (\r\n              <Popup>\r\n                Lowering this limit decreases your risk of frontrunning. However, this makes it more likely that your\r\n                transaction will fail due to normal price movements.\r\n              </Popup>\r\n            ) : (\r\n              ''\r\n            )}\r\n          </SlippageRow>\r\n          <SlippageRow wrap>\r\n            <Option\r\n              onClick={() => {\r\n                setFromFixed(1, 0.1)\r\n              }}\r\n              active={activeIndex === 1}\r\n            >\r\n              0.1%\r\n            </Option>\r\n            <Option\r\n              onClick={() => {\r\n                setFromFixed(2, 0.5)\r\n              }}\r\n              active={activeIndex === 2}\r\n            >\r\n              0.5%\r\n            </Option>\r\n            <OptionLarge\r\n              onClick={() => {\r\n                setFromFixed(3, 1)\r\n              }}\r\n              active={activeIndex === 3}\r\n            >\r\n              1% <Faded>(suggested)</Faded>\r\n            </OptionLarge>\r\n            <OptionCustom\r\n              active={activeIndex === 4}\r\n              color={\r\n                warningType === WARNING_TYPE.emptyInput\r\n                  ? ''\r\n                  : warningType !== WARNING_TYPE.none && warningType !== WARNING_TYPE.riskyEntryLow\r\n                  ? 'red'\r\n                  : ''\r\n              }\r\n              onClick={() => {\r\n                setFromCustom()\r\n              }}\r\n            >\r\n              <FlexBetween>\r\n                {!(warningType === WARNING_TYPE.none || warningType === WARNING_TYPE.emptyInput) && (\r\n                  <span role=\"img\" aria-label=\"warning\">\r\n                    ⚠️\r\n                  </span>\r\n                )}\r\n                <Input\r\n                  tabIndex={-1}\r\n                  ref={inputRef}\r\n                  active={activeIndex === 4}\r\n                  placeholder={\r\n                    activeIndex === 4\r\n                      ? !!userInput\r\n                        ? ''\r\n                        : '0'\r\n                      : activeIndex !== 4 && userInput !== ''\r\n                      ? userInput\r\n                      : 'Custom'\r\n                  }\r\n                  value={activeIndex === 4 ? userInput : ''}\r\n                  onChange={parseInput}\r\n                  color={\r\n                    warningType === WARNING_TYPE.emptyInput\r\n                      ? ''\r\n                      : warningType !== WARNING_TYPE.none && warningType !== WARNING_TYPE.riskyEntryLow\r\n                      ? 'red'\r\n                      : ''\r\n                  }\r\n                />\r\n                <Percent\r\n                  color={\r\n                    activeIndex !== 4\r\n                      ? 'faded'\r\n                      : warningType === WARNING_TYPE.riskyEntryHigh || warningType === WARNING_TYPE.invalidEntryBound\r\n                      ? 'red'\r\n                      : ''\r\n                  }\r\n                >\r\n                  %\r\n                </Percent>\r\n              </FlexBetween>\r\n            </OptionCustom>\r\n          </SlippageRow>\r\n          <SlippageRow>\r\n            <BottomError\r\n              show={activeIndex === 4}\r\n              color={\r\n                warningType === WARNING_TYPE.emptyInput\r\n                  ? ''\r\n                  : warningType !== WARNING_TYPE.none && warningType !== WARNING_TYPE.riskyEntryLow\r\n                  ? 'red'\r\n                  : ''\r\n              }\r\n            >\r\n              {activeIndex === 4 && warningType.toString() === 'none' && 'Custom slippage value'}\r\n              {warningType === WARNING_TYPE.emptyInput && 'Enter a slippage percentage'}\r\n              {warningType === WARNING_TYPE.invalidEntryBound && 'Please select a value no greater than 50%'}\r\n              {warningType === WARNING_TYPE.riskyEntryHigh && 'Your transaction may be frontrun'}\r\n              {warningType === WARNING_TYPE.riskyEntryLow && 'Your transaction may fail'}\r\n            </BottomError>\r\n          </SlippageRow>\r\n        </SlippageSelector>\r\n      </>\r\n    )\r\n  }\r\n\r\n  const setFromCustom = () => {\r\n    setActiveIndex(4)\r\n    inputRef.current.focus()\r\n    // if there's a value, evaluate the bounds\r\n    checkBounds(debouncedInput)\r\n  }\r\n\r\n  // used for slippage presets\r\n  const setFromFixed = (index, slippage) => {\r\n    // update slippage in parent, reset errors and input state\r\n    updateSlippage(slippage)\r\n    setWarningType(WARNING_TYPE.none)\r\n    setActiveIndex(index)\r\n    props.setcustomSlippageError('valid`')\r\n  }\r\n\r\n  const checkBounds = slippageValue => {\r\n    setWarningType(WARNING_TYPE.none)\r\n    props.setcustomSlippageError('valid')\r\n\r\n    if (slippageValue === '' || slippageValue === '.') {\r\n      props.setcustomSlippageError('invalid')\r\n      return setWarningType(WARNING_TYPE.emptyInput)\r\n    }\r\n\r\n    // check bounds and set errors\r\n    if (Number(slippageValue) < 0 || Number(slippageValue) > 50) {\r\n      props.setcustomSlippageError('invalid')\r\n      return setWarningType(WARNING_TYPE.invalidEntryBound)\r\n    }\r\n    if (Number(slippageValue) >= 0 && Number(slippageValue) < 0.1) {\r\n      props.setcustomSlippageError('valid')\r\n      setWarningType(WARNING_TYPE.riskyEntryLow)\r\n    }\r\n    if (Number(slippageValue) > 5) {\r\n      props.setcustomSlippageError('warning')\r\n      setWarningType(WARNING_TYPE.riskyEntryHigh)\r\n    }\r\n    //update the actual slippage value in parent\r\n    updateSlippage(Number(slippageValue))\r\n  }\r\n\r\n  // check that the theyve entered number and correct decimal\r\n  const parseInput = e => {\r\n    let input = e.target.value\r\n\r\n    // restrict to 2 decimal places\r\n    let acceptableValues = [/^$/, /^\\d{1,2}$/, /^\\d{0,2}\\.\\d{0,2}$/]\r\n    // if its within accepted decimal limit, update the input state\r\n    if (acceptableValues.some(a => a.test(input))) {\r\n      setUserInput(input)\r\n    }\r\n  }\r\n\r\n  const updateSlippage = newSlippage => {\r\n    // round to 2 decimals to prevent ethers error\r\n    let numParsed = parseInt(newSlippage * 100)\r\n\r\n    // set both slippage values in parents\r\n    props.setRawSlippage(numParsed)\r\n    props.setRawTokenSlippage(numParsed)\r\n  }\r\n\r\n  const b = text => <Bold>{text}</Bold>\r\n\r\n  const renderTransactionDetails = () => {\r\n    ReactGA.event({\r\n      category: 'TransactionDetail',\r\n      action: 'Open'\r\n    })\r\n\r\n    if (props.independentField === props.INPUT) {\r\n      return props.sending ? (\r\n        <TransactionInfo>\r\n          <div>\r\n            {t('youAreSelling')}{' '}\r\n            <ValueWrapper>\r\n              {b(\r\n                `${amountFormatter(\r\n                  props.independentValueParsed,\r\n                  props.independentDecimals,\r\n                  Math.min(4, props.independentDecimals)\r\n                )} ${props.inputSymbol}`\r\n              )}\r\n            </ValueWrapper>\r\n          </div>\r\n          <LastSummaryText>\r\n            {b(props.recipientAddress)} {t('willReceive')}{' '}\r\n            <ValueWrapper>\r\n              {b(\r\n                `${amountFormatter(\r\n                  props.dependentValueMinumum,\r\n                  props.dependentDecimals,\r\n                  Math.min(4, props.dependentDecimals)\r\n                )} ${props.outputSymbol}`\r\n              )}\r\n            </ValueWrapper>{' '}\r\n          </LastSummaryText>\r\n          <LastSummaryText>\r\n            {t('priceChange')} <ValueWrapper>{b(`${props.percentSlippageFormatted}%`)}</ValueWrapper>\r\n          </LastSummaryText>\r\n        </TransactionInfo>\r\n      ) : (\r\n        <TransactionInfo>\r\n          <div>\r\n            {t('youAreSelling')}{' '}\r\n            <ValueWrapper>\r\n              {b(\r\n                `${amountFormatter(\r\n                  props.independentValueParsed,\r\n                  props.independentDecimals,\r\n                  Math.min(4, props.independentDecimals)\r\n                )} ${props.inputSymbol}`\r\n              )}\r\n            </ValueWrapper>{' '}\r\n            {t('forAtLeast')}\r\n            <ValueWrapper>\r\n              {b(\r\n                `${amountFormatter(\r\n                  props.dependentValueMinumum,\r\n                  props.dependentDecimals,\r\n                  Math.min(4, props.dependentDecimals)\r\n                )} ${props.outputSymbol}`\r\n              )}\r\n            </ValueWrapper>\r\n          </div>\r\n          <LastSummaryText>\r\n            {t('priceChange')} <ValueWrapper>{b(`${props.percentSlippageFormatted}%`)}</ValueWrapper>\r\n          </LastSummaryText>\r\n        </TransactionInfo>\r\n      )\r\n    } else {\r\n      return props.sending ? (\r\n        <TransactionInfo>\r\n          <div>\r\n            {t('youAreSending')}{' '}\r\n            <ValueWrapper>\r\n              {b(\r\n                `${amountFormatter(\r\n                  props.independentValueParsed,\r\n                  props.independentDecimals,\r\n                  Math.min(4, props.independentDecimals)\r\n                )} ${props.outputSymbol}`\r\n              )}\r\n            </ValueWrapper>{' '}\r\n            {t('to')} {b(props.recipientAddress)} {t('forAtMost')}{' '}\r\n            <ValueWrapper>\r\n              {b(\r\n                `${amountFormatter(\r\n                  props.dependentValueMaximum,\r\n                  props.dependentDecimals,\r\n                  Math.min(4, props.dependentDecimals)\r\n                )} ${props.inputSymbol}`\r\n              )}\r\n            </ValueWrapper>{' '}\r\n          </div>\r\n          <LastSummaryText>\r\n            {t('priceChange')} <ValueWrapper>{b(`${props.percentSlippageFormatted}%`)}</ValueWrapper>\r\n          </LastSummaryText>\r\n        </TransactionInfo>\r\n      ) : (\r\n        <TransactionInfo>\r\n          {t('youAreBuying')}{' '}\r\n          <ValueWrapper>\r\n            {b(\r\n              `${amountFormatter(\r\n                props.independentValueParsed,\r\n                props.independentDecimals,\r\n                Math.min(4, props.independentDecimals)\r\n              )} ${props.outputSymbol}`\r\n            )}\r\n          </ValueWrapper>{' '}\r\n          {t('forAtMost')}{' '}\r\n          <ValueWrapper>\r\n            {b(\r\n              `${amountFormatter(\r\n                props.dependentValueMaximum,\r\n                props.dependentDecimals,\r\n                Math.min(4, props.dependentDecimals)\r\n              )} ${props.inputSymbol}`\r\n            )}\r\n          </ValueWrapper>{' '}\r\n          <LastSummaryText>\r\n            {t('priceChange')} <ValueWrapper>{b(`${props.percentSlippageFormatted}%`)}</ValueWrapper>\r\n          </LastSummaryText>\r\n        </TransactionInfo>\r\n      )\r\n    }\r\n  }\r\n  return <>{renderSummary()}</>\r\n}\r\n","import React, { useState, useReducer, useEffect } from 'react'\r\nimport ReactGA from 'react-ga'\r\n\r\nimport { useTranslation } from 'react-i18next'\r\nimport { useWeb3Context } from 'web3-react'\r\n\r\nimport { ethers } from 'ethers'\r\nimport styled from 'styled-components'\r\n\r\nimport { Button } from '../../theme'\r\nimport CurrencyInputPanel from '../CurrencyInputPanel'\r\nimport AddressInputPanel from '../AddressInputPanel'\r\nimport OversizedPanel from '../OversizedPanel'\r\nimport TransactionDetails from '../TransactionDetails'\r\nimport ArrowDown from '../../assets/svg/SVGArrowDown'\r\nimport { amountFormatter, calculateGasMargin } from '../../utils'\r\nimport { useExchangeContract } from '../../hooks'\r\nimport { useTokenDetails } from '../../contexts/Tokens'\r\nimport { useTransactionAdder } from '../../contexts/Transactions'\r\nimport { useAddressBalance, useExchangeReserves } from '../../contexts/Balances'\r\nimport { useFetchAllBalances } from '../../contexts/AllBalances'\r\nimport { useAddressAllowance } from '../../contexts/Allowances'\r\n\r\nconst INPUT = 0\r\nconst OUTPUT = 1\r\n\r\nconst ETH_TO_TOKEN = 0\r\nconst TOKEN_TO_ETH = 1\r\nconst TOKEN_TO_TOKEN = 2\r\n\r\n// denominated in bips\r\nconst ALLOWED_SLIPPAGE_DEFAULT = 100\r\nconst TOKEN_ALLOWED_SLIPPAGE_DEFAULT = 100\r\n\r\n// 15 minutes, denominated in seconds\r\nconst DEADLINE_FROM_NOW = 60 * 15\r\n\r\n// % above the calculated gas cost that we actually send, denominated in bips\r\nconst GAS_MARGIN = ethers.utils.bigNumberify(1000)\r\n\r\nconst DownArrowBackground = styled.div`\r\n  ${({ theme }) => theme.flexRowNoWrap}\r\n  justify-content: center;\r\n  align-items: center;\r\n`\r\n\r\nconst WrappedArrowDown = ({ clickable, active, ...rest }) => <ArrowDown {...rest} />\r\nconst DownArrow = styled(WrappedArrowDown)`\r\n  color: ${({ theme, active }) => (active ? theme.royalBlue : theme.chaliceGray)};\r\n  width: 0.625rem;\r\n  height: 0.625rem;\r\n  position: relative;\r\n  padding: 0.875rem;\r\n  cursor: ${({ clickable }) => clickable && 'pointer'};\r\n`\r\n\r\nconst ExchangeRateWrapper = styled.div`\r\n  ${({ theme }) => theme.flexRowNoWrap};\r\n  align-items: center;\r\n  color: ${({ theme }) => theme.doveGray};\r\n  font-size: 0.75rem;\r\n  padding: 0.5rem 1rem;\r\n`\r\n\r\nconst ExchangeRate = styled.span`\r\n  flex: 1 1 auto;\r\n  width: 0;\r\n  color: ${({ theme }) => theme.doveGray};\r\n`\r\n\r\nconst Flex = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  padding: 2rem;\r\n\r\n  button {\r\n    max-width: 20rem;\r\n  }\r\n`\r\n\r\nfunction calculateSlippageBounds(value, token = false, tokenAllowedSlippage, allowedSlippage) {\r\n  if (value) {\r\n    const offset = value.mul(token ? tokenAllowedSlippage : allowedSlippage).div(ethers.utils.bigNumberify(10000))\r\n    const minimum = value.sub(offset)\r\n    const maximum = value.add(offset)\r\n    return {\r\n      minimum: minimum.lt(ethers.constants.Zero) ? ethers.constants.Zero : minimum,\r\n      maximum: maximum.gt(ethers.constants.MaxUint256) ? ethers.constants.MaxUint256 : maximum\r\n    }\r\n  } else {\r\n    return {}\r\n  }\r\n}\r\n\r\nfunction getSwapType(inputCurrency, outputCurrency) {\r\n  if (!inputCurrency || !outputCurrency) {\r\n    return null\r\n  } else if (inputCurrency === 'ETH') {\r\n    return ETH_TO_TOKEN\r\n  } else if (outputCurrency === 'ETH') {\r\n    return TOKEN_TO_ETH\r\n  } else {\r\n    return TOKEN_TO_TOKEN\r\n  }\r\n}\r\n\r\n// this mocks the getInputPrice function, and calculates the required output\r\nfunction calculateEtherTokenOutputFromInput(inputAmount, inputReserve, outputReserve) {\r\n  const inputAmountWithFee = inputAmount.mul(ethers.utils.bigNumberify(997))\r\n  const numerator = inputAmountWithFee.mul(outputReserve)\r\n  const denominator = inputReserve.mul(ethers.utils.bigNumberify(1000)).add(inputAmountWithFee)\r\n  return numerator.div(denominator)\r\n}\r\n\r\n// this mocks the getOutputPrice function, and calculates the required input\r\nfunction calculateEtherTokenInputFromOutput(outputAmount, inputReserve, outputReserve) {\r\n  const numerator = inputReserve.mul(outputAmount).mul(ethers.utils.bigNumberify(1000))\r\n  const denominator = outputReserve.sub(outputAmount).mul(ethers.utils.bigNumberify(997))\r\n  return numerator.div(denominator).add(ethers.constants.One)\r\n}\r\n\r\nfunction getInitialSwapState(outputCurrency) {\r\n  return {\r\n    independentValue: '', // this is a user input\r\n    dependentValue: '', // this is a calculated number\r\n    independentField: INPUT,\r\n    inputCurrency: 'ETH',\r\n    outputCurrency: outputCurrency ? outputCurrency : ''\r\n  }\r\n}\r\n\r\nfunction swapStateReducer(state, action) {\r\n  switch (action.type) {\r\n    case 'FLIP_INDEPENDENT': {\r\n      const { independentField, inputCurrency, outputCurrency } = state\r\n      return {\r\n        ...state,\r\n        dependentValue: '',\r\n        independentField: independentField === INPUT ? OUTPUT : INPUT,\r\n        inputCurrency: outputCurrency,\r\n        outputCurrency: inputCurrency\r\n      }\r\n    }\r\n    case 'SELECT_CURRENCY': {\r\n      const { inputCurrency, outputCurrency } = state\r\n      const { field, currency } = action.payload\r\n\r\n      const newInputCurrency = field === INPUT ? currency : inputCurrency\r\n      const newOutputCurrency = field === OUTPUT ? currency : outputCurrency\r\n\r\n      if (newInputCurrency === newOutputCurrency) {\r\n        return {\r\n          ...state,\r\n          inputCurrency: field === INPUT ? currency : '',\r\n          outputCurrency: field === OUTPUT ? currency : ''\r\n        }\r\n      } else {\r\n        return {\r\n          ...state,\r\n          inputCurrency: newInputCurrency,\r\n          outputCurrency: newOutputCurrency\r\n        }\r\n      }\r\n    }\r\n    case 'UPDATE_INDEPENDENT': {\r\n      const { field, value } = action.payload\r\n      const { dependentValue, independentValue } = state\r\n      return {\r\n        ...state,\r\n        independentValue: value,\r\n        dependentValue: value === independentValue ? dependentValue : '',\r\n        independentField: field\r\n      }\r\n    }\r\n    case 'UPDATE_DEPENDENT': {\r\n      return {\r\n        ...state,\r\n        dependentValue: action.payload\r\n      }\r\n    }\r\n    default: {\r\n      return getInitialSwapState()\r\n    }\r\n  }\r\n}\r\n\r\nfunction getExchangeRate(inputValue, inputDecimals, outputValue, outputDecimals, invert = false) {\r\n  try {\r\n    if (\r\n      inputValue &&\r\n      (inputDecimals || inputDecimals === 0) &&\r\n      outputValue &&\r\n      (outputDecimals || outputDecimals === 0)\r\n    ) {\r\n      const factor = ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18))\r\n\r\n      if (invert) {\r\n        return inputValue\r\n          .mul(factor)\r\n          .div(outputValue)\r\n          .mul(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(outputDecimals)))\r\n          .div(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(inputDecimals)))\r\n      } else {\r\n        return outputValue\r\n          .mul(factor)\r\n          .div(inputValue)\r\n          .mul(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(inputDecimals)))\r\n          .div(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(outputDecimals)))\r\n      }\r\n    }\r\n  } catch {}\r\n}\r\n\r\nfunction getMarketRate(\r\n  swapType,\r\n  inputReserveETH,\r\n  inputReserveToken,\r\n  inputDecimals,\r\n  outputReserveETH,\r\n  outputReserveToken,\r\n  outputDecimals,\r\n  invert = false\r\n) {\r\n  if (swapType === ETH_TO_TOKEN) {\r\n    return getExchangeRate(outputReserveETH, 18, outputReserveToken, outputDecimals, invert)\r\n  } else if (swapType === TOKEN_TO_ETH) {\r\n    return getExchangeRate(inputReserveToken, inputDecimals, inputReserveETH, 18, invert)\r\n  } else if (swapType === TOKEN_TO_TOKEN) {\r\n    const factor = ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18))\r\n    const firstRate = getExchangeRate(inputReserveToken, inputDecimals, inputReserveETH, 18)\r\n    const secondRate = getExchangeRate(outputReserveETH, 18, outputReserveToken, outputDecimals)\r\n    try {\r\n      return !!(firstRate && secondRate) ? firstRate.mul(secondRate).div(factor) : undefined\r\n    } catch {}\r\n  }\r\n}\r\n\r\nexport default function ExchangePage({ initialCurrency, sending }) {\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3Context()\r\n\r\n  const addTransaction = useTransactionAdder()\r\n\r\n  const [rawSlippage, setRawSlippage] = useState(ALLOWED_SLIPPAGE_DEFAULT)\r\n  const [rawTokenSlippage, setRawTokenSlippage] = useState(TOKEN_ALLOWED_SLIPPAGE_DEFAULT)\r\n\r\n  const allowedSlippageBig = ethers.utils.bigNumberify(rawSlippage)\r\n  const tokenAllowedSlippageBig = ethers.utils.bigNumberify(rawTokenSlippage)\r\n\r\n  // analytics\r\n  useEffect(() => {\r\n    ReactGA.pageview(window.location.pathname + window.location.search)\r\n  }, [])\r\n\r\n  // core swap state\r\n  const [swapState, dispatchSwapState] = useReducer(swapStateReducer, initialCurrency, getInitialSwapState)\r\n\r\n  const { independentValue, dependentValue, independentField, inputCurrency, outputCurrency } = swapState\r\n\r\n  const [recipient, setRecipient] = useState({ address: '', name: '' })\r\n  const [recipientError, setRecipientError] = useState()\r\n\r\n  // get swap type from the currency types\r\n  const swapType = getSwapType(inputCurrency, outputCurrency)\r\n\r\n  // get decimals and exchange address for each of the currency types\r\n  const { symbol: inputSymbol, decimals: inputDecimals, exchangeAddress: inputExchangeAddress } = useTokenDetails(\r\n    inputCurrency\r\n  )\r\n  const { symbol: outputSymbol, decimals: outputDecimals, exchangeAddress: outputExchangeAddress } = useTokenDetails(\r\n    outputCurrency\r\n  )\r\n\r\n  const inputExchangeContract = useExchangeContract(inputExchangeAddress)\r\n  const outputExchangeContract = useExchangeContract(outputExchangeAddress)\r\n  const contract = swapType === ETH_TO_TOKEN ? outputExchangeContract : inputExchangeContract\r\n\r\n  // get input allowance\r\n  const inputAllowance = useAddressAllowance(account, inputCurrency, inputExchangeAddress)\r\n\r\n  // fetch reserves for each of the currency types\r\n  const { reserveETH: inputReserveETH, reserveToken: inputReserveToken } = useExchangeReserves(inputCurrency)\r\n  const { reserveETH: outputReserveETH, reserveToken: outputReserveToken } = useExchangeReserves(outputCurrency)\r\n\r\n  // get balances for each of the currency types\r\n  const inputBalance = useAddressBalance(account, inputCurrency)\r\n  const outputBalance = useAddressBalance(account, outputCurrency)\r\n  const inputBalanceFormatted = !!(inputBalance && Number.isInteger(inputDecimals))\r\n    ? amountFormatter(inputBalance, inputDecimals, Math.min(4, inputDecimals))\r\n    : ''\r\n  const outputBalanceFormatted = !!(outputBalance && Number.isInteger(outputDecimals))\r\n    ? amountFormatter(outputBalance, outputDecimals, Math.min(4, outputDecimals))\r\n    : ''\r\n\r\n  // compute useful transforms of the data above\r\n  const independentDecimals = independentField === INPUT ? inputDecimals : outputDecimals\r\n  const dependentDecimals = independentField === OUTPUT ? inputDecimals : outputDecimals\r\n\r\n  // declare/get parsed and formatted versions of input/output values\r\n  const [independentValueParsed, setIndependentValueParsed] = useState()\r\n  const dependentValueFormatted = !!(dependentValue && (dependentDecimals || dependentDecimals === 0))\r\n    ? amountFormatter(dependentValue, dependentDecimals, Math.min(4, dependentDecimals), false)\r\n    : ''\r\n  const inputValueParsed = independentField === INPUT ? independentValueParsed : dependentValue\r\n  const inputValueFormatted = independentField === INPUT ? independentValue : dependentValueFormatted\r\n  const outputValueParsed = independentField === OUTPUT ? independentValueParsed : dependentValue\r\n  const outputValueFormatted = independentField === OUTPUT ? independentValue : dependentValueFormatted\r\n\r\n  // validate + parse independent value\r\n  const [independentError, setIndependentError] = useState()\r\n  useEffect(() => {\r\n    if (independentValue && (independentDecimals || independentDecimals === 0)) {\r\n      try {\r\n        const parsedValue = ethers.utils.parseUnits(independentValue, independentDecimals)\r\n\r\n        if (parsedValue.lte(ethers.constants.Zero) || parsedValue.gte(ethers.constants.MaxUint256)) {\r\n          throw Error()\r\n        } else {\r\n          setIndependentValueParsed(parsedValue)\r\n          setIndependentError(null)\r\n        }\r\n      } catch {\r\n        setIndependentError(t('inputNotValid'))\r\n      }\r\n\r\n      return () => {\r\n        setIndependentValueParsed()\r\n        setIndependentError()\r\n      }\r\n    }\r\n  }, [independentValue, independentDecimals, t])\r\n\r\n  // calculate slippage from target rate\r\n  const { minimum: dependentValueMinumum, maximum: dependentValueMaximum } = calculateSlippageBounds(\r\n    dependentValue,\r\n    swapType === TOKEN_TO_TOKEN,\r\n    tokenAllowedSlippageBig,\r\n    allowedSlippageBig\r\n  )\r\n\r\n  // validate input allowance + balance\r\n  const [inputError, setInputError] = useState()\r\n  const [showUnlock, setShowUnlock] = useState(false)\r\n  useEffect(() => {\r\n    const inputValueCalculation = independentField === INPUT ? independentValueParsed : dependentValueMaximum\r\n    if (inputBalance && (inputAllowance || inputCurrency === 'ETH') && inputValueCalculation) {\r\n      if (inputBalance.lt(inputValueCalculation)) {\r\n        setInputError(t('insufficientBalance'))\r\n      } else if (inputCurrency !== 'ETH' && inputAllowance.lt(inputValueCalculation)) {\r\n        setInputError(t('unlockTokenCont'))\r\n        setShowUnlock(true)\r\n      } else {\r\n        setInputError(null)\r\n        setShowUnlock(false)\r\n      }\r\n\r\n      return () => {\r\n        setInputError()\r\n        setShowUnlock(false)\r\n      }\r\n    }\r\n  }, [independentField, independentValueParsed, dependentValueMaximum, inputBalance, inputCurrency, inputAllowance, t])\r\n\r\n  // calculate dependent value\r\n  useEffect(() => {\r\n    const amount = independentValueParsed\r\n\r\n    if (swapType === ETH_TO_TOKEN) {\r\n      const reserveETH = outputReserveETH\r\n      const reserveToken = outputReserveToken\r\n\r\n      if (amount && reserveETH && reserveToken) {\r\n        try {\r\n          const calculatedDependentValue =\r\n            independentField === INPUT\r\n              ? calculateEtherTokenOutputFromInput(amount, reserveETH, reserveToken)\r\n              : calculateEtherTokenInputFromOutput(amount, reserveETH, reserveToken)\r\n\r\n          if (calculatedDependentValue.lte(ethers.constants.Zero)) {\r\n            throw Error()\r\n          }\r\n\r\n          dispatchSwapState({ type: 'UPDATE_DEPENDENT', payload: calculatedDependentValue })\r\n        } catch {\r\n          setIndependentError(t('insufficientLiquidity'))\r\n        }\r\n        return () => {\r\n          dispatchSwapState({ type: 'UPDATE_DEPENDENT', payload: '' })\r\n        }\r\n      }\r\n    } else if (swapType === TOKEN_TO_ETH) {\r\n      const reserveETH = inputReserveETH\r\n      const reserveToken = inputReserveToken\r\n\r\n      if (amount && reserveETH && reserveToken) {\r\n        try {\r\n          const calculatedDependentValue =\r\n            independentField === INPUT\r\n              ? calculateEtherTokenOutputFromInput(amount, reserveToken, reserveETH)\r\n              : calculateEtherTokenInputFromOutput(amount, reserveToken, reserveETH)\r\n\r\n          if (calculatedDependentValue.lte(ethers.constants.Zero)) {\r\n            throw Error()\r\n          }\r\n\r\n          dispatchSwapState({ type: 'UPDATE_DEPENDENT', payload: calculatedDependentValue })\r\n        } catch {\r\n          setIndependentError(t('insufficientLiquidity'))\r\n        }\r\n        return () => {\r\n          dispatchSwapState({ type: 'UPDATE_DEPENDENT', payload: '' })\r\n        }\r\n      }\r\n    } else if (swapType === TOKEN_TO_TOKEN) {\r\n      const reserveETHFirst = inputReserveETH\r\n      const reserveTokenFirst = inputReserveToken\r\n\r\n      const reserveETHSecond = outputReserveETH\r\n      const reserveTokenSecond = outputReserveToken\r\n\r\n      if (amount && reserveETHFirst && reserveTokenFirst && reserveETHSecond && reserveTokenSecond) {\r\n        try {\r\n          if (independentField === INPUT) {\r\n            const intermediateValue = calculateEtherTokenOutputFromInput(amount, reserveTokenFirst, reserveETHFirst)\r\n            if (intermediateValue.lte(ethers.constants.Zero)) {\r\n              throw Error()\r\n            }\r\n            const calculatedDependentValue = calculateEtherTokenOutputFromInput(\r\n              intermediateValue,\r\n              reserveETHSecond,\r\n              reserveTokenSecond\r\n            )\r\n            if (calculatedDependentValue.lte(ethers.constants.Zero)) {\r\n              throw Error()\r\n            }\r\n            dispatchSwapState({ type: 'UPDATE_DEPENDENT', payload: calculatedDependentValue })\r\n          } else {\r\n            const intermediateValue = calculateEtherTokenInputFromOutput(amount, reserveETHSecond, reserveTokenSecond)\r\n            if (intermediateValue.lte(ethers.constants.Zero)) {\r\n              throw Error()\r\n            }\r\n            const calculatedDependentValue = calculateEtherTokenInputFromOutput(\r\n              intermediateValue,\r\n              reserveTokenFirst,\r\n              reserveETHFirst\r\n            )\r\n            if (calculatedDependentValue.lte(ethers.constants.Zero)) {\r\n              throw Error()\r\n            }\r\n            dispatchSwapState({ type: 'UPDATE_DEPENDENT', payload: calculatedDependentValue })\r\n          }\r\n        } catch {\r\n          setIndependentError(t('insufficientLiquidity'))\r\n        }\r\n        return () => {\r\n          dispatchSwapState({ type: 'UPDATE_DEPENDENT', payload: '' })\r\n        }\r\n      }\r\n    }\r\n  }, [\r\n    independentValueParsed,\r\n    swapType,\r\n    outputReserveETH,\r\n    outputReserveToken,\r\n    inputReserveETH,\r\n    inputReserveToken,\r\n    independentField,\r\n    t\r\n  ])\r\n\r\n  const [inverted, setInverted] = useState(false)\r\n  const exchangeRate = getExchangeRate(inputValueParsed, inputDecimals, outputValueParsed, outputDecimals)\r\n  const exchangeRateInverted = getExchangeRate(inputValueParsed, inputDecimals, outputValueParsed, outputDecimals, true)\r\n\r\n  const marketRate = getMarketRate(\r\n    swapType,\r\n    inputReserveETH,\r\n    inputReserveToken,\r\n    inputDecimals,\r\n    outputReserveETH,\r\n    outputReserveToken,\r\n    outputDecimals\r\n  )\r\n\r\n  const percentSlippage =\r\n    exchangeRate && marketRate\r\n      ? exchangeRate\r\n          .sub(marketRate)\r\n          .abs()\r\n          .mul(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18)))\r\n          .div(marketRate)\r\n          .sub(ethers.utils.bigNumberify(3).mul(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(15))))\r\n      : undefined\r\n  const percentSlippageFormatted = percentSlippage && amountFormatter(percentSlippage, 16, 2)\r\n  const slippageWarning =\r\n    percentSlippage &&\r\n    percentSlippage.gte(ethers.utils.parseEther('.05')) &&\r\n    percentSlippage.lt(ethers.utils.parseEther('.2')) // [5% - 20%)\r\n  const highSlippageWarning = percentSlippage && percentSlippage.gte(ethers.utils.parseEther('.2')) // [20+%\r\n\r\n  const isValid = sending\r\n    ? exchangeRate && inputError === null && independentError === null && recipientError === null\r\n    : exchangeRate && inputError === null && independentError === null\r\n\r\n  const estimatedText = `(${t('estimated')})`\r\n  function formatBalance(value) {\r\n    return `Balance: ${value}`\r\n  }\r\n\r\n  async function onSwap() {\r\n    const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW\r\n\r\n    let estimate, method, args, value\r\n    if (independentField === INPUT) {\r\n      ReactGA.event({\r\n        category: `${swapType}`,\r\n        action: sending ? 'TransferInput' : 'SwapInput'\r\n      })\r\n\r\n      if (swapType === ETH_TO_TOKEN) {\r\n        estimate = sending ? contract.estimate.ethToTokenTransferInput : contract.estimate.ethToTokenSwapInput\r\n        method = sending ? contract.ethToTokenTransferInput : contract.ethToTokenSwapInput\r\n        args = sending ? [dependentValueMinumum, deadline, recipient.address] : [dependentValueMinumum, deadline]\r\n        value = independentValueParsed\r\n      } else if (swapType === TOKEN_TO_ETH) {\r\n        estimate = sending ? contract.estimate.tokenToEthTransferInput : contract.estimate.tokenToEthSwapInput\r\n        method = sending ? contract.tokenToEthTransferInput : contract.tokenToEthSwapInput\r\n        args = sending\r\n          ? [independentValueParsed, dependentValueMinumum, deadline, recipient.address]\r\n          : [independentValueParsed, dependentValueMinumum, deadline]\r\n        value = ethers.constants.Zero\r\n      } else if (swapType === TOKEN_TO_TOKEN) {\r\n        estimate = sending ? contract.estimate.tokenToTokenTransferInput : contract.estimate.tokenToTokenSwapInput\r\n        method = sending ? contract.tokenToTokenTransferInput : contract.tokenToTokenSwapInput\r\n        args = sending\r\n          ? [\r\n              independentValueParsed,\r\n              dependentValueMinumum,\r\n              ethers.constants.One,\r\n              deadline,\r\n              recipient.address,\r\n              outputCurrency\r\n            ]\r\n          : [independentValueParsed, dependentValueMinumum, ethers.constants.One, deadline, outputCurrency]\r\n        value = ethers.constants.Zero\r\n      }\r\n    } else if (independentField === OUTPUT) {\r\n      ReactGA.event({\r\n        category: `${swapType}`,\r\n        action: sending ? 'TransferOutput' : 'SwapOutput'\r\n      })\r\n\r\n      if (swapType === ETH_TO_TOKEN) {\r\n        estimate = sending ? contract.estimate.ethToTokenTransferOutput : contract.estimate.ethToTokenSwapOutput\r\n        method = sending ? contract.ethToTokenTransferOutput : contract.ethToTokenSwapOutput\r\n        args = sending ? [independentValueParsed, deadline, recipient.address] : [independentValueParsed, deadline]\r\n        value = dependentValueMaximum\r\n      } else if (swapType === TOKEN_TO_ETH) {\r\n        estimate = sending ? contract.estimate.tokenToEthTransferOutput : contract.estimate.tokenToEthSwapOutput\r\n        method = sending ? contract.tokenToEthTransferOutput : contract.tokenToEthSwapOutput\r\n        args = sending\r\n          ? [independentValueParsed, dependentValueMaximum, deadline, recipient.address]\r\n          : [independentValueParsed, dependentValueMaximum, deadline]\r\n        value = ethers.constants.Zero\r\n      } else if (swapType === TOKEN_TO_TOKEN) {\r\n        estimate = sending ? contract.estimate.tokenToTokenTransferOutput : contract.estimate.tokenToTokenSwapOutput\r\n        method = sending ? contract.tokenToTokenTransferOutput : contract.tokenToTokenSwapOutput\r\n        args = sending\r\n          ? [\r\n              independentValueParsed,\r\n              dependentValueMaximum,\r\n              ethers.constants.MaxUint256,\r\n              deadline,\r\n              recipient.address,\r\n              outputCurrency\r\n            ]\r\n          : [independentValueParsed, dependentValueMaximum, ethers.constants.MaxUint256, deadline, outputCurrency]\r\n        value = ethers.constants.Zero\r\n      }\r\n    }\r\n\r\n    const estimatedGasLimit = await estimate(...args, { value })\r\n    method(...args, { value, gasLimit: calculateGasMargin(estimatedGasLimit, GAS_MARGIN) }).then(response => {\r\n      addTransaction(response)\r\n    })\r\n  }\r\n\r\n  const [customSlippageError, setcustomSlippageError] = useState('')\r\n\r\n  const allBalances = useFetchAllBalances()\r\n\r\n  return (\r\n    <>\r\n      <CurrencyInputPanel\r\n        title={t('input')}\r\n        allBalances={allBalances}\r\n        description={inputValueFormatted && independentField === OUTPUT ? estimatedText : ''}\r\n        extraText={inputBalanceFormatted && formatBalance(inputBalanceFormatted)}\r\n        extraTextClickHander={() => {\r\n          if (inputBalance && inputDecimals) {\r\n            const valueToSet = inputCurrency === 'ETH' ? inputBalance.sub(ethers.utils.parseEther('.1')) : inputBalance\r\n            if (valueToSet.gt(ethers.constants.Zero)) {\r\n              dispatchSwapState({\r\n                type: 'UPDATE_INDEPENDENT',\r\n                payload: { value: amountFormatter(valueToSet, inputDecimals, inputDecimals, false), field: INPUT }\r\n              })\r\n            }\r\n          }\r\n        }}\r\n        onCurrencySelected={inputCurrency => {\r\n          dispatchSwapState({ type: 'SELECT_CURRENCY', payload: { currency: inputCurrency, field: INPUT } })\r\n        }}\r\n        onValueChange={inputValue => {\r\n          dispatchSwapState({ type: 'UPDATE_INDEPENDENT', payload: { value: inputValue, field: INPUT } })\r\n        }}\r\n        showUnlock={showUnlock}\r\n        selectedTokens={[inputCurrency, outputCurrency]}\r\n        selectedTokenAddress={inputCurrency}\r\n        value={inputValueFormatted}\r\n        errorMessage={inputError ? inputError : independentField === INPUT ? independentError : ''}\r\n      />\r\n      <OversizedPanel>\r\n        <DownArrowBackground>\r\n          <DownArrow\r\n            onClick={() => {\r\n              dispatchSwapState({ type: 'FLIP_INDEPENDENT' })\r\n            }}\r\n            clickable\r\n            alt=\"swap\"\r\n            active={isValid}\r\n          />\r\n        </DownArrowBackground>\r\n      </OversizedPanel>\r\n      <CurrencyInputPanel\r\n        title={t('output')}\r\n        allBalances={allBalances}\r\n        description={outputValueFormatted && independentField === INPUT ? estimatedText : ''}\r\n        extraText={outputBalanceFormatted && formatBalance(outputBalanceFormatted)}\r\n        onCurrencySelected={outputCurrency => {\r\n          dispatchSwapState({ type: 'SELECT_CURRENCY', payload: { currency: outputCurrency, field: OUTPUT } })\r\n        }}\r\n        onValueChange={outputValue => {\r\n          dispatchSwapState({ type: 'UPDATE_INDEPENDENT', payload: { value: outputValue, field: OUTPUT } })\r\n        }}\r\n        selectedTokens={[inputCurrency, outputCurrency]}\r\n        selectedTokenAddress={outputCurrency}\r\n        value={outputValueFormatted}\r\n        errorMessage={independentField === OUTPUT ? independentError : ''}\r\n        disableUnlock\r\n      />\r\n      {sending ? (\r\n        <>\r\n          <OversizedPanel>\r\n            <DownArrowBackground>\r\n              <DownArrow active={isValid} alt=\"arrow\" />\r\n            </DownArrowBackground>\r\n          </OversizedPanel>\r\n          <AddressInputPanel onChange={setRecipient} onError={setRecipientError} />\r\n        </>\r\n      ) : (\r\n        ''\r\n      )}\r\n      <OversizedPanel hideBottom>\r\n        <ExchangeRateWrapper\r\n          onClick={() => {\r\n            setInverted(inverted => !inverted)\r\n          }}\r\n        >\r\n          <ExchangeRate>{t('exchangeRate')}</ExchangeRate>\r\n          {inverted ? (\r\n            <span>\r\n              {exchangeRate\r\n                ? `1 ${inputSymbol} = ${amountFormatter(exchangeRate, 18, 4, false)} ${outputSymbol}`\r\n                : ' - '}\r\n            </span>\r\n          ) : (\r\n            <span>\r\n              {exchangeRate\r\n                ? `1 ${outputSymbol} = ${amountFormatter(exchangeRateInverted, 18, 4, false)} ${inputSymbol}`\r\n                : ' - '}\r\n            </span>\r\n          )}\r\n        </ExchangeRateWrapper>\r\n      </OversizedPanel>\r\n      <TransactionDetails\r\n        account={account}\r\n        setRawSlippage={setRawSlippage}\r\n        setRawTokenSlippage={setRawTokenSlippage}\r\n        rawSlippage={rawSlippage}\r\n        slippageWarning={slippageWarning}\r\n        highSlippageWarning={highSlippageWarning}\r\n        inputError={inputError}\r\n        independentError={independentError}\r\n        inputCurrency={inputCurrency}\r\n        outputCurrency={outputCurrency}\r\n        independentValue={independentValue}\r\n        independentValueParsed={independentValueParsed}\r\n        independentField={independentField}\r\n        INPUT={INPUT}\r\n        inputValueParsed={inputValueParsed}\r\n        outputValueParsed={outputValueParsed}\r\n        inputSymbol={inputSymbol}\r\n        outputSymbol={outputSymbol}\r\n        dependentValueMinumum={dependentValueMinumum}\r\n        dependentValueMaximum={dependentValueMaximum}\r\n        dependentDecimals={dependentDecimals}\r\n        independentDecimals={independentDecimals}\r\n        percentSlippageFormatted={percentSlippageFormatted}\r\n        setcustomSlippageError={setcustomSlippageError}\r\n        recipientAddress={recipient.address}\r\n        sending={sending}\r\n      />\r\n      <Flex>\r\n        <Button\r\n          disabled={!isValid || customSlippageError === 'invalid'}\r\n          onClick={onSwap}\r\n          warning={highSlippageWarning || customSlippageError === 'warning'}\r\n        >\r\n          {sending\r\n            ? highSlippageWarning || customSlippageError === 'warning'\r\n              ? t('sendAnyway')\r\n              : t('send')\r\n            : highSlippageWarning || customSlippageError === 'warning'\r\n            ? t('swapAnyway')\r\n            : t('swap')}\r\n        </Button>\r\n      </Flex>\r\n    </>\r\n  )\r\n}\r\n","module.exports = __webpack_public_path__ + \"static/media/question.d293f467.svg\";"],"sourceRoot":""}